@using ChartJSCore.Models;
@using VehicleRentalSystem.Presentation.Areas.Admin.ViewModels;
@model SalesViewModel
@{
    ViewData["Title"] = "Sales & Stats";
    Chart verticalBarChart = (Chart)ViewData["VerticalBarChart"];
    Chart horizontalBarChart = (Chart)ViewData["HorizontalBarChart"];
    Chart lineChart = (Chart)ViewData["LineChart"];
}

<div class="container" style="margin-top:9vh; height:88vh; overflow-y:auto">
    <h3 class="mb-2">Sales & Stats</h3>

    <div class="d-flex w-full gap-3">
        <div class="w-75 d-flex flex-column gap-3" style="height:75vh">
            <div class="h-50 d-flex w-full gap-3">
                <div class="p-3 w-50 d-flex flex-column  bg-white"  style="border-radius:10px !important">
                    <h5 class="card-title">Vehicle Rents</h5>
                    <canvas id="verticalBarChart"></canvas>
                </div>
                <div class="p-3 w-50 d-flex flex-column bg-white"  style="border-radius:10px !important">

                    <h5 class="card-title">Total User Rents</h5>
                    <canvas id="horizontalBarChart"></canvas>
                </div>
            </div>
            <div class="h-50 d-flex w-full gap-3">
                <div class="p-3 w-50 d-flex flex-column  bg-white"  style="border-radius:10px !important">
                    <h5 class="card-title">Brand's Vehicle Count</h5>
                    <canvas id="lineChart"></canvas>
                </div>
                <div class="p-3 w-50 d-flex flex-column bg-white"  style="border-radius:10px !important; overflow-y:auto;">
                    <h4>InActive Customers</h4>
                    @foreach (var item in Model.InactiveUserCount)
                    {
                            <p>@item.CustomerName's Last Rented Date @item.LastRentedDate</p>
                    }
                </div>
            </div>
        </div>
        <div class="w-25 d-flex flex-column gap-3">
            <div class="d-flex h-50 bg-white p-3" style="border-radius:10px !important">
                <div>
                    <h4>Customers</h4>
                    <p>Total Customers: @Model.CustomersCount</p>
                </div>
            </div>
            <div class="d-flex h-50 bg-white mt-2 p-3 rounded-4" style="border-radius:10px !important">
                <div>
                    <h4>Rents</h4>
                    <p>Total Rents: @Model.TotalRentalCounts</p>
                    <p>Pending Requests: @Model.PendingRequestsCount</p>
                    <p>Total Sales: Rs @Model.TotalSales</p>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script type="text/javascript">
        @Html.Raw(verticalBarChart.CreateChartCode("verticalBarChart"));
    </script>
    <script type="text/javascript">
        @Html.Raw(horizontalBarChart.CreateChartCode("horizontalBarChart"));
    </script>
    <script type="text/javascript">
        @Html.Raw(lineChart.CreateChartCode("lineChart"));
    </script>
}

<style>
    body{
        margin-bottom:0px !important;
    }
    p{
        margin-bottom:5px !important;
    }

</style>
